"use strict";(self["webpackChunkcloud_dist"]=self["webpackChunkcloud_dist"]||[]).push([[257],{3796:function(e,t,n){var l=n(3396);t["Z"]=(0,l.aZ)({name:"Add",render(){return(0,l.h)("svg",{width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,l.h)("path",{d:"M256 112V400M400 256H112",stroke:"currentColor","stroke-width":"32","stroke-linecap":"round","stroke-linejoin":"round"}))}})},5257:function(e,t,n){n.r(t),n.d(t,{default:function(){return Q}});var l=n(3396);const i={class:"cdkey-manage-container"},a={class:"filter"},r={class:"actions"};function o(e,t,n,o,u,d){const s=(0,l.up)("n-select"),c=(0,l.up)("n-form-item"),m=(0,l.up)("n-input"),p=(0,l.up)("n-button"),f=(0,l.up)("n-form"),v=(0,l.up)("n-data-table"),h=(0,l.up)("popup-window");return(0,l.wg)(),(0,l.iD)("div",i,[(0,l._)("div",a,[(0,l.Wm)(f,{size:"medium","label-placement":"left","label-width":"auto",inline:"",model:o.filterFormData},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{label:"激活分区"},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{value:o.filterFormData.dist,"onUpdate:value":t[0]||(t[0]=e=>o.filterFormData.dist=e),placeholder:"请选择",options:o.statusOptions,style:{width:"150px"}},null,8,["value","options"])])),_:1}),(0,l.Wm)(c,{label:"状态"},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{value:o.filterFormData.status,"onUpdate:value":t[1]||(t[1]=e=>o.filterFormData.status=e),options:o.statusOptions,placeholder:"请选择",style:{width:"150px"}},null,8,["value","options"])])),_:1}),(0,l.Wm)(c,{label:"关键字"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{value:o.filterFormData.cdkey,"onUpdate:value":t[2]||(t[2]=e=>o.filterFormData.cdkey=e),placeholder:"激活码"},null,8,["value"])])),_:1}),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,{type:"primary","attr-type":"button",onClick:o.query,style:{"margin-right":"20px"}},{default:(0,l.w5)((()=>[(0,l.Uk)(" 查询 ")])),_:1},8,["onClick"]),(0,l.Wm)(p,{"attr-type":"button",onClick:o.reset},{default:(0,l.w5)((()=>[(0,l.Uk)(" 重置 ")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),(0,l._)("div",r,[(0,l.Wm)(p,{type:"primary","attr-type":"button",style:{"margin-bottom":"10px"},onClick:t[3]||(t[3]=e=>o.isShowCdkeyAlert=!0)},{default:(0,l.w5)((()=>[(0,l.Uk)(" 新增激活码 ")])),_:1})]),(0,l.Wm)(v,{columns:o.columns,data:o.data,pagination:!0,bordered:!1},null,8,["columns","data"]),(0,l.Wm)(h,{modelValue:o.isShowCdkeyAlert,"onUpdate:modelValue":t[7]||(t[7]=e=>o.isShowCdkeyAlert=e),"confirm-text":"创建激活码",onOnConfirm:o.addCdkey},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{ref:"cdkeyFormRef",model:o.cdkeyFormData,rules:o.rules,"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{label:"激活分区",path:"dist"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{value:o.cdkeyFormData.dist,"onUpdate:value":t[4]||(t[4]=e=>o.cdkeyFormData.dist=e),placeholder:"请选择"},null,8,["value"])])),_:1}),(0,l.Wm)(c,{label:"有效期",path:"expiration"},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{value:o.cdkeyFormData.expiration,"onUpdate:value":t[5]||(t[5]=e=>o.cdkeyFormData.expiration=e),options:o.expirationOptions,placeholder:"请选择"},null,8,["value","options"])])),_:1}),(0,l.Wm)(c,{label:"数量",path:"amount"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{value:o.cdkeyFormData.amount,"onUpdate:value":t[6]||(t[6]=e=>o.cdkeyFormData.amount=e),placeholder:"请输入"},null,8,["value"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","onOnConfirm"])])}var u=n(3273),d=n(4165),s=n(7646),c=n(3008),m=n(5393),p=n(5844),f=n(4870),v=n(4750),h=n(7477),g=n(4498),b=n(5755),y=(0,l.aZ)({name:"Remove",render(){return(0,l.h)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},(0,l.h)("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:"\n        fill: none;\n        stroke: currentColor;\n        stroke-linecap: round;\n        stroke-linejoin: round;\n        stroke-width: 32px;\n      "}))}}),w=n(3796),k=n(9611),x=n(8107),I=n(9420),F=n(4108),D=n(8080),_=n(8089),C=n(4092),B=n(4069),V=n(8975),Z=n(8308);const U=e=>{const{textColorDisabled:t}=e;return{iconColorDisabled:t}},O=(0,x.j)({name:"InputNumber",common:Z.Z,peers:{Button:B.Z,Input:V.Z},self:U});var R=O;function N(e){return void 0===e||null===e||"string"===typeof e&&""===e.trim()?null:Number(e)}function P(e){return e.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(e)||/^\.\d+$/.test(e))}function S(e){return void 0===e||null===e||!Number.isNaN(e)}function T(e,t){return void 0===e||null===e?"":void 0===t?String(e):e.toFixed(t)}function M(e){if(null===e)return null;if("number"===typeof e)return e;{const t=Number(e);return Number.isNaN(t)?null:t}}var W=n(411),A=(0,W.c)([(0,W.cB)("input-number-suffix","\n display: inline-block;\n margin-right: 10px;\n "),(0,W.cB)("input-number-prefix","\n display: inline-block;\n margin-left: 10px;\n ")]),$=n(8506);const H=800,j=100,q=Object.assign(Object.assign({},x.Z.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},buttonPlacement:{type:String,default:"right"},readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},parse:Function,format:Function,precision:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]});var z=(0,l.aZ)({name:"InputNumber",props:q,setup(e){const{mergedBorderedRef:t,mergedClsPrefixRef:n,mergedRtlRef:i}=(0,I.Z)(e),a=(0,x.Z)("InputNumber","-input-number",A,R,e,n),{localeRef:r}=(0,F.Z)("InputNumber"),o=(0,D.Z)(e),{mergedSizeRef:u,mergedDisabledRef:d,mergedStatusRef:s}=o,c=(0,f.iH)(null),m=(0,f.iH)(null),p=(0,f.iH)(null),y=(0,f.iH)(e.defaultValue),w=(0,f.Vh)(e,"value"),k=(0,h.Z)(w,y),C=(0,f.iH)(""),B=e=>{const t=String(e).split(".")[1];return t?t.length:0},V=t=>{const n=[e.min,e.max,e.step,t].map((e=>void 0===e?0:B(e)));return Math.max(...n)},Z=(0,g.Z)((()=>{const{placeholder:t}=e;return void 0!==t?t:r.value.placeholder})),U=(0,g.Z)((()=>{const t=M(e.step);return null!==t?0===t?1:Math.abs(t):1})),O=(0,g.Z)((()=>{const t=M(e.min);return null!==t?t:null})),W=(0,g.Z)((()=>{const t=M(e.max);return null!==t?t:null})),q=t=>{const{value:n}=k;if(t===n)return void E();const{"onUpdate:value":l,onUpdateValue:i,onChange:a}=e,{nTriggerFormInput:r,nTriggerFormChange:u}=o;a&&(0,_.R)(a,t),i&&(0,_.R)(i,t),l&&(0,_.R)(l,t),y.value=t,r(),u()},z=({offset:t,doUpdateIfValid:n,fixPrecision:l,isInputing:i})=>{const{value:a}=C;if(i&&P(a))return!1;const r=(e.parse||N)(a);if(null===r)return n&&q(null),null;if(S(r)){const a=B(r),{precision:o}=e;if(void 0!==o&&o<a&&!l)return!1;let u=parseFloat((r+t).toFixed(null!==o&&void 0!==o?o:V(r)));if(S(u)){const{value:t}=W,{value:l}=O;if(null!==t&&u>t){if(!n||i)return!1;u=t}if(null!==l&&u<l){if(!n||i)return!1;u=l}return!(e.validator&&!e.validator(u))&&(n&&q(u),u)}}return!1},E=()=>{const{value:t}=k;if(S(t)){const{format:n,precision:l}=e;n?C.value=n(t):null===t||void 0===l||B(t)>l?C.value=T(t,void 0):C.value=T(t,l)}else C.value=String(t)};E();const K=(0,g.Z)((()=>{const e=z({offset:0,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1});return!1===e})),G=(0,g.Z)((()=>{const{value:t}=k;if(e.validator&&null===t)return!1;const{value:n}=U,l=z({offset:-n,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1});return!1!==l})),L=(0,g.Z)((()=>{const{value:t}=k;if(e.validator&&null===t)return!1;const{value:n}=U,l=z({offset:+n,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1});return!1!==l}));function Y(t){const{onFocus:n}=e,{nTriggerFormFocus:l}=o;n&&(0,_.R)(n,t),l()}function J(t){var n,i;if(t.target===(null===(n=c.value)||void 0===n?void 0:n.wrapperElRef))return;const a=z({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});if(!1!==a){const e=null===(i=c.value)||void 0===i?void 0:i.inputElRef;e&&(e.value=String(a||"")),k.value===a&&E()}else E();const{onBlur:r}=e,{nTriggerFormBlur:u}=o;r&&(0,_.R)(r,t),u(),(0,l.Y3)((()=>{E()}))}function Q(t){const{onClear:n}=e;n&&(0,_.R)(n,t)}function X(){const{value:t}=L;if(!t)return void se();const{value:n}=k;if(null===n)e.validator||q(le());else{const{value:e}=U;z({offset:e,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}function ee(){const{value:t}=G;if(!t)return void de();const{value:n}=k;if(null===n)e.validator||q(le());else{const{value:e}=U;z({offset:-e,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}const te=Y,ne=J;function le(){if(e.validator)return null;const{value:t}=O,{value:n}=W;return null!==t?Math.max(0,t):null!==n?Math.min(0,n):0}function ie(e){Q(e),q(null)}function ae(e){var t,n,l;(null===(t=p.value)||void 0===t?void 0:t.$el.contains(e.target))&&e.preventDefault(),(null===(n=m.value)||void 0===n?void 0:n.$el.contains(e.target))&&e.preventDefault(),null===(l=c.value)||void 0===l||l.activate()}let re=null,oe=null,ue=null;function de(){ue&&(window.clearTimeout(ue),ue=null),re&&(window.clearInterval(re),re=null)}function se(){me&&(window.clearTimeout(me),me=null),oe&&(window.clearInterval(oe),oe=null)}function ce(){de(),ue=window.setTimeout((()=>{re=window.setInterval((()=>{ee()}),j)}),H),(0,b.on)("mouseup",document,de,{once:!0})}let me=null;function pe(){se(),me=window.setTimeout((()=>{oe=window.setInterval((()=>{X()}),j)}),H),(0,b.on)("mouseup",document,se,{once:!0})}const fe=()=>{oe||X()},ve=()=>{re||ee()};function he(t){var n,l;if("Enter"===t.key){if(t.target===(null===(n=c.value)||void 0===n?void 0:n.wrapperElRef))return;const e=z({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});!1!==e&&(null===(l=c.value)||void 0===l||l.deactivate())}else if("ArrowUp"===t.key){if(!L.value)return;if(!1===e.keyboard.ArrowUp)return;t.preventDefault();const n=z({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});!1!==n&&X()}else if("ArrowDown"===t.key){if(!G.value)return;if(!1===e.keyboard.ArrowDown)return;t.preventDefault();const n=z({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});!1!==n&&ee()}}function ge(t){C.value=t,!e.updateValueOnInput||e.format||e.parse||void 0!==e.precision||z({offset:0,doUpdateIfValid:!0,isInputing:!0,fixPrecision:!1})}(0,l.YP)(k,(()=>{E()}));const be={focus:()=>{var e;return null===(e=c.value)||void 0===e?void 0:e.focus()},blur:()=>{var e;return null===(e=c.value)||void 0===e?void 0:e.blur()}},ye=(0,$.V)("InputNumber",i,n);return Object.assign(Object.assign({},be),{rtlEnabled:ye,inputInstRef:c,minusButtonInstRef:m,addButtonInstRef:p,mergedClsPrefix:n,mergedBordered:t,uncontrolledValue:y,mergedValue:k,mergedPlaceholder:Z,displayedValueInvalid:K,mergedSize:u,mergedDisabled:d,displayedValue:C,addable:L,minusable:G,mergedStatus:s,handleFocus:te,handleBlur:ne,handleClear:ie,handleMouseDown:ae,handleAddClick:fe,handleMinusClick:ve,handleAddMousedown:pe,handleMinusMousedown:ce,handleKeyDown:he,handleUpdateDisplayedValue:ge,mergedTheme:a,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:(0,l.Fl)((()=>{const{self:{iconColorDisabled:e}}=a.value,[t,n,l,i]=(0,v.m4)(e);return{textColorTextDisabled:`rgb(${t}, ${n}, ${l})`,opacityDisabled:`${i}`}}))})},render(){const{mergedClsPrefix:e,$slots:t}=this,n=()=>(0,l.h)(m.Rb,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{icon:()=>(0,C.gI)(t["minus-icon"],(()=>[(0,l.h)(k.Z,{clsPrefix:e},{default:()=>(0,l.h)(y,null)})]))}),i=()=>(0,l.h)(m.Rb,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{icon:()=>(0,C.gI)(t["add-icon"],(()=>[(0,l.h)(k.Z,{clsPrefix:e},{default:()=>(0,l.h)(w.Z,null)})]))});return(0,l.h)("div",{class:[`${e}-input-number`,this.rtlEnabled&&`${e}-input-number--rtl`]},(0,l.h)(c.Z,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,internalLoadingBeforeSuffix:!0},{prefix:()=>{var i;return this.showButton&&"both"===this.buttonPlacement?[n(),(0,C.K9)(t.prefix,(t=>t?(0,l.h)("span",{class:`${e}-input-number-prefix`},t):null))]:null===(i=t.prefix)||void 0===i?void 0:i.call(t)},suffix:()=>{var a;return this.showButton?[(0,C.K9)(t.suffix,(t=>t?(0,l.h)("span",{class:`${e}-input-number-suffix`},t):null)),"right"===this.buttonPlacement?n():null,i()]:null===(a=t.suffix)||void 0===a?void 0:a.call(t)}}))}}),E=n(3612);const K=0,G=1;var L={name:"CdkeyManage",components:{NForm:u.Z,NSelect:d.Z,NFormItem:s.ZP,NInput:c.Z,NButton:m.ZP,NDataTable:p.Z,NInputNumber:z,PopupWindow:E.Z},watch:{isShowCdkeyAlert(e){e||(this.cdkeyFormData.dist=null,this.cdkeyFormData.expiration=null,this.cdkeyFormData.amount=null)}},setup(){const e=()=>{},t=()=>{},n=(0,f.iH)(null),i=(0,f.iH)(!1),a=()=>{n.value?.validate((e=>{e||(i.value=!1)})).catch((e=>{}))};return{isShowCdkeyAlert:i,filterFormData:(0,f.iH)({dist:null,status:null,cdkey:null}),statusOptions:[{label:"已使用",value:K},{label:"未使用",value:G}],query:e,reset:t,cdkeyFormRef:n,cdkeyFormData:(0,f.iH)({dist:null,expiration:null,amount:null}),rules:{dist:{required:!0,trigger:["blur","input"],message:"请选择分区"},expiration:{required:!0,trigger:["blur","change"],message:"请选择有效期",type:"number"},amount:{required:!0,trigger:["blur","input"],message:"请输入数量"}},expirationOptions:[{label:"1个月",value:30},{label:"2个月",value:60},{label:"3个月",value:90},{label:"6个月",value:180},{label:"1年",value:365},{label:"2年",value:730},{label:"3年",value:1095},{label:"4年",value:1460}],addCdkey:a,columns:[{title:"编号",key:"id"},{title:"激活码",key:"code"},{title:"激活分区",key:"category_id"},{title:"有效期",key:"valid_duration"},{title:"状态",key:"status",render(e){return(0,l.h)("span",{style:{color:e.use_time?"red":"green"}},e.use_time?"已使用":"未使用")}},{title:"创建时间",key:"created_time"},{title:"用户ID",key:"user_id",render(e){return(0,l.h)("span",null,e.user_id||"--")}},{title:"使用时间",key:"use_time",render(e){return(0,l.h)("span",null,e.use_time||"--")}}],data:[{id:"0001",code:"098797832",category_id:"Game/Mobile game/Videos",valid_duration:"3个月",created_time:"2022.02.16 15:20:34",user_id:"001",use_time:"2022.02.16 15:20:34"},{id:"0001",code:"098797832",category_id:"Game/Mobile game/Videos",valid_duration:"1个月",created_time:"2022.02.16 15:20:34",user_id:"",use_time:""},{id:"0001",code:"098797832",category_id:"Game/Mobile game/Videos",valid_duration:"3个月",created_time:"2022.02.16 15:20:34",user_id:"001",use_time:"2022.02.16 15:20:34"}]}}},Y=n(89);const J=(0,Y.Z)(L,[["render",o],["__scopeId","data-v-fa78ec1a"]]);var Q=J}}]);
//# sourceMappingURL=257.00f14646.js.map