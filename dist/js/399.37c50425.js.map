{"version":3,"file":"js/399.37c50425.js","mappings":"oSAoBA,SAASA,IACPC,EAAK,OACP,C,wJCnBA,MAAMC,EAAc,EAEpB,O,2QCsCA,MAAMC,GAASC,EAAAA,EAAAA,OACT,QAAEC,IAAYC,EAAAA,EAAAA,GAAkB,CAAC,YAGvC,SAASC,IACPJ,EAAOK,IAAI,EACb,CAGA,MAAMC,GAAUC,EAAAA,EAAAA,IAAI,MACdC,GAAWC,EAAAA,EAAAA,IAAS,CACxBC,SAAU,KACVC,WAAY,OAERC,EAAQ,CACZF,SAAU,CACRG,UAAU,EACVC,QAAS,CAAC,OAAQ,SAClBZ,QAAS,SAEXS,WAAY,CACVE,UAAU,EACVC,QAAS,CAAC,OAAQ,SAClBZ,QAAS,YACTa,UAAWC,IAIf,SAASA,EAAaC,EAAMC,GAC1B,OAAOV,EAASE,WAAaQ,CAC/B,CAEA,SAASC,IACPb,EAAQc,OACJC,UAASC,UACJC,UACGC,EAAAA,EAAAA,KAAWC,EAAAA,EAAAA,MAAa,CAAEf,SAAUF,EAASE,WACnDR,EAAQwB,QAAQ,YAClB,IAEDC,OACL,C,08BC9EA,MAAM5B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://cloud_dist/./src/components/m/PageHeader.vue","webpack://cloud_dist/./src/components/m/PageHeader.vue?a645","webpack://cloud_dist/./src/views/m/Modifypwd.vue","webpack://cloud_dist/./src/views/m/Modifypwd.vue?9b1a"],"sourcesContent":["<template>\r\n  <n-page-header\r\n    style=\"padding: 0 10px; border-bottom: 1px solid #eee\"\r\n    :title=\"title\"\r\n    @back=\"back\"\r\n  ></n-page-header>\r\n</template>\r\n\r\n<script setup>\r\nimport { NPageHeader } from 'naive-ui';\r\n\r\nconst emit = defineEmits(['back']);\r\nconst props = defineProps({\r\n  title: {\r\n    required: false,\r\n    type: String,\r\n    default: '',\r\n  },\r\n});\r\n\r\nfunction back() {\r\n  emit('back');\r\n}\r\n</script>\r\n","import script from \"./PageHeader.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PageHeader.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div class=\"modifypwd-container\">\r\n    <!-- 头部导航 -->\r\n    <PageHeader title=\"Update password\" @back=\"goBack\" />\r\n    <!-- 修改密码表单 -->\r\n    <n-form\r\n      class=\"form\"\r\n      ref=\"formRef\"\r\n      :model=\"formData\"\r\n      :rules=\"rules\"\r\n      :show-require-mark=\"false\"\r\n    >\r\n      <n-form-item label=\"New Password\" path=\"password\">\r\n        <n-input\r\n          v-model:value=\"formData.password\"\r\n          type=\"password\"\r\n          placeholder=\"New Password\"\r\n        />\r\n      </n-form-item>\r\n      <n-form-item label=\"Confirm Password\" path=\"confirmPwd\">\r\n        <n-input\r\n          v-model:value=\"formData.confirmPwd\"\r\n          type=\"password\"\r\n          placeholder=\"Confirm Password\"\r\n        />\r\n      </n-form-item>\r\n      <n-form-item>\r\n        <n-button class=\"submit\" block color=\"rgb(237, 56, 56)\" @click=\"submit\">\r\n          Confirm\r\n        </n-button>\r\n      </n-form-item>\r\n    </n-form>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { createDiscreteApi, NForm, NFormItem, NInput, NButton } from 'naive-ui';\r\nimport { ref, reactive } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport PageHeader from '@/components/m/PageHeader';\r\nimport { getUserId } from '@/common/cookie';\r\nimport { updateUser } from '@/api/user';\r\n\r\nconst router = useRouter();\r\nconst { message } = createDiscreteApi(['message']);\r\n\r\n// 头部导航\r\nfunction goBack() {\r\n  router.go(-1);\r\n}\r\n\r\n// 修改密码表单\r\nconst formRef = ref(null);\r\nconst formData = reactive({\r\n  password: null,\r\n  confirmPwd: null,\r\n});\r\nconst rules = {\r\n  password: {\r\n    required: true,\r\n    trigger: ['blur', 'input'],\r\n    message: '请输入密码',\r\n  },\r\n  confirmPwd: {\r\n    required: true,\r\n    trigger: ['blur', 'input'],\r\n    message: '两次密码输入不一致',\r\n    validator: checkSamePwd,\r\n  },\r\n};\r\n\r\nfunction checkSamePwd(rule, val) {\r\n  return formData.password === val;\r\n}\r\n\r\nfunction submit() {\r\n  formRef.value\r\n    ?.validate(async (errors) => {\r\n      if (!errors) {\r\n        await updateUser(getUserId(), { password: formData.password });\r\n        message.success('Success!');\r\n      }\r\n    })\r\n    .catch();\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.modifypwd-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  background: #fff;\r\n  text-align: left;\r\n  .form {\r\n    padding: 15px 30px;\r\n    .submit {\r\n      margin-top: 50px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import script from \"./Modifypwd.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Modifypwd.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Modifypwd.vue?vue&type=style&index=0&id=11d62284&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\my\\\\cloud_dist\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-11d62284\"]])\n\nexport default __exports__"],"names":["back","emit","__exports__","router","useRouter","message","createDiscreteApi","goBack","go","formRef","ref","formData","reactive","password","confirmPwd","rules","required","trigger","validator","checkSamePwd","rule","val","submit","value","validate","async","errors","updateUser","getUserId","success","catch"],"sourceRoot":""}