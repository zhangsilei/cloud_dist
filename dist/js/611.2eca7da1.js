"use strict";(self["webpackChunkcloud_dist"]=self["webpackChunkcloud_dist"]||[]).push([[611],{5611:function(e,a,l){l.r(a),l.d(a,{default:function(){return S}});var t=l(3396),u=l(4870),n=l(4120),i=l(5941),o=l(7646),r=l(4165),d=l(3008),s=l(5393),c=l(5844),m=l(3273),v=l(3612),_=l(9063),p=l(7245);function f(e){return(0,p.Z)({url:"/activation-codes",method:"get",params:e})}function g(e){return(0,p.Z)({url:"/activation-codes",method:"post",data:e})}const b={class:"activation-code-manage-container"};var U={__name:"ActivationManage",setup(e){const{message:a}=(0,n.M)(["message"]),l=0,p=1,U=[{label:"已使用",value:l},{label:"未使用",value:p}],y=[{label:"1个月",value:30},{label:"2个月",value:60},{label:"3个月",value:90},{label:"6个月",value:180},{label:"1年",value:365},{label:"2年",value:730},{label:"3年",value:1095},{label:"4年",value:1460}],w=[{title:"编号",key:"id"},{title:"激活码",key:"code"},{title:"激活分区",key:"category_id"},{title:"有效期",key:"valid_duration"},{title:"状态",key:"status",render(e){return(0,t.h)("span",{style:{color:e.use_time?"red":"green"}},e.use_time?"已使用":"未使用")}},{title:"创建时间",key:"created_time"},{title:"用户ID",key:"user_id",render(e){return(0,t.h)("span",null,e.user_id||"--")}},{title:"使用时间",key:"use_time",render(e){return(0,t.h)("span",null,e.use_time||"--")}}];let S=(0,u.iH)(!0),h=(0,u.iH)(null);async function Z(){const e=await(0,_.$R)();h.value=e.items||[],S.value=!1}Z();const W=(0,u.qj)({status:null,query:null}),k=()=>{},D=()=>{},P=(0,u.iH)(null),q=(0,u.qj)({isShow:!1,title:"创建激活码",formData:(0,u.iH)({category_id:null,valid_duration:null,activation_code_count:null}),rules:{category_id:{required:!0,trigger:["blur","change"],message:"请选择分区",type:"number"},valid_duration:{required:!0,trigger:["blur","change"],message:"请选择有效期",type:"number"},activation_code_count:{required:!0,trigger:["blur","input"],message:"请输入数量"}}});function C(){P.value?.validate((async e=>{e||(await g({...q.formData,activation_code_count:parseInt(q.formData.activation_code_count)}),a.success("操作成功！"))})).catch()}(0,t.YP)((()=>q.isShow),(e=>{if(!e)for(const a in q.formData)Object.hasOwnProperty.call(q.formData,a)&&(q.formData[a]=null)}));const H=(0,u.iH)({page_num:1,page_size:10});async function z(){await f(H.value)}return z(),(e,a)=>((0,t.wg)(),(0,t.iD)("div",b,[(0,t.Wm)((0,u.SU)(i.Z),{class:"filter"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,u.SU)(o.ZP),{"label-placement":"left",label:"激活分区"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,u.SU)(r.Z),{value:W.status,"onUpdate:value":a[0]||(a[0]=e=>W.status=e),"label-field":"name","value-field":"id",options:(0,u.SU)(h),style:{width:"150px"}},null,8,["value","options"])])),_:1}),(0,t.Wm)((0,u.SU)(o.ZP),{"label-placement":"left",label:"状态"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,u.SU)(r.Z),{value:W.status,"onUpdate:value":a[1]||(a[1]=e=>W.status=e),options:U,style:{width:"150px"}},null,8,["value"])])),_:1}),(0,t.Wm)((0,u.SU)(o.ZP),{"label-placement":"left",label:"关键字"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,u.SU)(d.Z),{value:W.query,"onUpdate:value":a[2]||(a[2]=e=>W.query=e),placeholder:"激活码"},null,8,["value"])])),_:1}),(0,t.Wm)((0,u.SU)(o.ZP),{"label-placement":"left"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,u.SU)(s.ZP),{type:"primary",onClick:k},{default:(0,t.w5)((()=>[(0,t.Uk)(" 查询 ")])),_:1})])),_:1}),(0,t.Wm)((0,u.SU)(o.ZP),{"label-placement":"left"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,u.SU)(s.ZP),{onClick:D},{default:(0,t.w5)((()=>[(0,t.Uk)(" 重置 ")])),_:1})])),_:1})])),_:1}),(0,t.Wm)((0,u.SU)(i.Z),{class:"action"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,u.SU)(s.ZP),{type:"primary",onClick:a[3]||(a[3]=e=>q.isShow=!0)},{default:(0,t.w5)((()=>[(0,t.Uk)(" 新增激活码 ")])),_:1})])),_:1}),(0,t.Wm)((0,u.SU)(c.Z),{loading:(0,u.SU)(S),columns:w,data:e.data,pagination:!0,bordered:!1,"on-update:page":e=>H.value.page_num=e,"on-update:page-size":e=>H.value.page_size=e},null,8,["loading","data","on-update:page","on-update:page-size"]),(0,t.Wm)((0,u.SU)(v.Z),{modelValue:q.isShow,"onUpdate:modelValue":a[7]||(a[7]=e=>q.isShow=e),title:q.title,onOnConfirm:C},{default:(0,t.w5)((()=>[(0,t.Wm)((0,u.SU)(m.Z),{ref_key:"activationRef",ref:P,model:q.formData,rules:q.rules,"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,u.SU)(o.ZP),{label:"激活分区",path:"category_id"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,u.SU)(r.Z),{value:q.formData.category_id,"onUpdate:value":a[4]||(a[4]=e=>q.formData.category_id=e),"label-field":"name","value-field":"id",options:(0,u.SU)(h)},null,8,["value","options"])])),_:1}),(0,t.Wm)((0,u.SU)(o.ZP),{label:"有效期",path:"valid_duration"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,u.SU)(r.Z),{value:q.formData.valid_duration,"onUpdate:value":a[5]||(a[5]=e=>q.formData.valid_duration=e),options:y},null,8,["value"])])),_:1}),(0,t.Wm)((0,u.SU)(o.ZP),{label:"数量",path:"activation_code_count"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,u.SU)(d.Z),{value:q.formData.activation_code_count,"onUpdate:value":a[6]||(a[6]=e=>q.formData.activation_code_count=e)},null,8,["value"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])]))}},y=l(89);const w=(0,y.Z)(U,[["__scopeId","data-v-7193b2d8"]]);var S=w}}]);
//# sourceMappingURL=611.2eca7da1.js.map