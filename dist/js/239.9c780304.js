"use strict";(self["webpackChunkcloud_dist"]=self["webpackChunkcloud_dist"]||[]).push([[239],{83239:function(e,s,r){r.r(s),r.d(s,{default:function(){return D}});r(57658);var t=r(73396),n=r(87139),a=r(44870),c=r(75869),l=r(74786),o=r(28040),u=r(19785),i=r(22483),d=r(59684),m=r(10796),w=r(137),_=r.n(w);const p={class:"res-detail-container"},v={class:"header"},f={class:"title"},g={class:"name"},h={class:"content"},y=["id"],N=["src"];var S={__name:"ResourceDetail",setup(e){const s=(0,i.yj)(),r=(0,i.tv)(),w=(0,a.qj)({dataList:[],resCurrentNum:0,resTotalNums:0,resName:"",currentRes:(0,a.iH)(null)});async function S(){const e=await(0,d.rT)(s.query),r=e.resources||[];w.dataList=r,w.resTotalNums=e.total,r.find(((e,r)=>{e.id==s.query.currentId&&(w.resCurrentNum=r+1,w.resName=e.name,w.currentRes=e)}))}function C(){if(_().isSupported()){const e=new(_()),s=document.querySelector(`#${w.currentRes.name}`);e.loadSource((0,m.Kn)(w.currentRes.video_url)),e.attachMedia(s),s.play()}else console.warn("当前浏览器不支持Hls.js")}S(),(0,t.YP)((()=>w.currentRes),(e=>{"VIDEO"===e.resource_type&&(0,t.Y3)((()=>{C()}))}));const k=[u.W_],D=e=>{console.log(e)},R=e=>{w.resCurrentNum=e.realIndex+1,console.log("slide change")};function q(){r.push({path:"/resource"})}return(e,s)=>((0,t.wg)(),(0,t.iD)("div",p,[(0,t._)("div",v,[(0,t._)("div",f,[(0,t._)("div",g,(0,n.zw)(w.resName),1),(0,t._)("div",null,(0,n.zw)(w.resCurrentNum)+"/"+(0,n.zw)(w.resTotalNums)+"个文件",1)]),(0,t.Wm)((0,a.SU)(l.g),{class:"close-btn",size:"20",onClick:q},{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(c.Z),{class:"close-icon"})])),_:1})]),(0,t._)("div",h,[(0,t.Wm)((0,a.SU)(o.tq),{navigation:!0,modules:k,class:"res-swiper",onSwiper:D,onSlideChange:R},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(w.dataList,(e=>((0,t.wg)(),(0,t.j4)((0,a.SU)(o.o5),{class:"res-item"},{default:(0,t.w5)((()=>["VIDEO"===e.resource_type?((0,t.wg)(),(0,t.iD)("video",{key:0,id:e.name,class:"res",muted:"",controls:"",controlsList:"nodownload"},null,8,y)):((0,t.wg)(),(0,t.iD)("img",{key:1,src:(0,a.SU)(m.Kn)(e.picture_url),style:{height:"100%"}},null,8,N))])),_:2},1024)))),256))])),_:1})])]))}},C=r(40089);const k=(0,C.Z)(S,[["__scopeId","data-v-731269b2"]]);var D=k}}]);
//# sourceMappingURL=239.9c780304.js.map