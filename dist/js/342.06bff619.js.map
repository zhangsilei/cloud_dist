{"version":3,"file":"js/342.06bff619.js","mappings":"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","sources":["webpack://cloud_dist/./node_modules/naive-ui/es/typography/src/styles/p.cssr.js","webpack://cloud_dist/./node_modules/naive-ui/es/typography/src/p.js","webpack://cloud_dist/./src/views/pc/SettingsManage.vue","webpack://cloud_dist/./src/views/pc/SettingsManage.vue?052d"],"sourcesContent":["import { c, cB } from '../../../_utils/cssr';\n// vars:\n// --n-bezier\n// --n-font-size\n// --n-line-height\n// --n-margin\n// --n-text-color\nexport default cB('p', `\n box-sizing: border-box;\n transition: color .3s var(--n-bezier);\n margin: var(--n-margin);\n font-size: var(--n-font-size);\n line-height: var(--n-line-height);\n color: var(--n-text-color);\n`, [c('&:first-child', 'margin-top: 0;'), c('&:last-child', 'margin-bottom: 0;')]);","import { h, defineComponent, computed } from 'vue';\nimport { useConfig, useTheme, useThemeClass } from '../../_mixins';\nimport { typographyLight } from '../styles';\nimport style from './styles/p.cssr';\nexport const pProps = Object.assign(Object.assign({}, useTheme.props), { depth: [String, Number] });\nexport default defineComponent({\n    name: 'P',\n    props: pProps,\n    setup(props) {\n        const { mergedClsPrefixRef, inlineThemeDisabled } = useConfig(props);\n        const themeRef = useTheme('Typography', '-p', style, typographyLight, props, mergedClsPrefixRef);\n        const cssVarsRef = computed(() => {\n            const { depth } = props;\n            const typeSafeDepth = depth || '1';\n            const { common: { cubicBezierEaseInOut }, self: { pFontSize, pLineHeight, pMargin, pTextColor, [`pTextColor${typeSafeDepth}Depth`]: depthTextColor } } = themeRef.value;\n            return {\n                '--n-bezier': cubicBezierEaseInOut,\n                '--n-font-size': pFontSize,\n                '--n-line-height': pLineHeight,\n                '--n-margin': pMargin,\n                '--n-text-color': depth === undefined ? pTextColor : depthTextColor\n            };\n        });\n        const themeClassHandle = inlineThemeDisabled\n            ? useThemeClass('p', computed(() => `${props.depth || ''}`), cssVarsRef, props)\n            : undefined;\n        return {\n            mergedClsPrefix: mergedClsPrefixRef,\n            cssVars: inlineThemeDisabled ? undefined : cssVarsRef,\n            themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass,\n            onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender\n        };\n    },\n    render() {\n        var _a;\n        (_a = this.onRender) === null || _a === void 0 ? void 0 : _a.call(this);\n        return (h(\"p\", { class: [`${this.mergedClsPrefix}-p`, this.themeClass], style: this.cssVars }, this.$slots));\n    }\n});\n","<template>\r\n  <div class=\"settings-manage-container\">\r\n    <div class=\"website\">\r\n      <n-form\r\n        ref=\"websiteFormRef\"\r\n        :model=\"settingsData\"\r\n        label-placement=\"left\"\r\n        label-width=\"auto\"\r\n        require-mark-placement=\"right-hanging\"\r\n      >\r\n        <n-form-item label=\"网站名称\">\r\n          <n-input\r\n            v-model:value=\"settingsData.name.value\"\r\n            placeholder=\"请输入网站名称\"\r\n          />\r\n        </n-form-item>\r\n        <n-form-item label=\"logo\">\r\n          <n-upload directory-dnd @change=\"onUpload\">\r\n            <n-upload-dragger>\r\n              <div style=\"margin-bottom: 12px\">\r\n                <n-icon size=\"48\" :depth=\"3\">\r\n                  <add />\r\n                </n-icon>\r\n              </div>\r\n              <n-text style=\"font-size: 16px\"> 上传图片 </n-text>\r\n              <n-p depth=\"3\" style=\"margin: 8px 0 0 0\">\r\n                (图片大小不超过1M）\r\n              </n-p>\r\n            </n-upload-dragger>\r\n          </n-upload>\r\n        </n-form-item>\r\n        <n-form-item label=\"当前logo图片\">\r\n          <n-image v-if=\"logoUrl\" width=\"100\" :src=\"logoUrl\"></n-image>\r\n        </n-form-item>\r\n        <n-form-item>\r\n          <n-button type=\"primary\" @click=\"save\"> 保存 </n-button>\r\n        </n-form-item>\r\n      </n-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { Add } from '@vicons/ionicons5';\r\nimport {\r\n  createDiscreteApi,\r\n  NIcon,\r\n  NInput,\r\n  NForm,\r\n  NFormItem,\r\n  NUpload,\r\n  NUploadDragger,\r\n  NText,\r\n  NP,\r\n  NButton,\r\n  NImage,\r\n} from 'naive-ui';\r\nimport { ref, reactive } from 'vue';\r\nimport { getSettingConfigs, updateSettingConfigs } from '@/api/setting';\r\nimport { parseUrlToPath } from '@/common/global';\r\nimport { postPicture } from '@/api/file';\r\n\r\nconst { message, dialog } = createDiscreteApi(['message', 'dialog']);\r\n\r\nconst KEY_NAME = 'name';\r\nconst KEY_LOGO = 'logo';\r\nconst websiteFormRef = ref(null);\r\nconst settingsData = reactive({\r\n  name: {\r\n    id: 1,\r\n    value: null,\r\n  },\r\n  logo: {\r\n    id: 2,\r\n    value: ref(null),\r\n  },\r\n});\r\nconst logoUrl = ref('');\r\n\r\nasync function save() {\r\n  if (settingsData.name.value) {\r\n    await updateSettingConfigs(settingsData.name.id, {\r\n      value: settingsData.name.value,\r\n      // key: KEY_NAME,\r\n    });\r\n  }\r\n  if (settingsData.logo.value) {\r\n    await updateSettingConfigs(settingsData.logo.id, {\r\n      value: settingsData.logo.value,\r\n      // key: KEY_LOGO,\r\n    });\r\n  }\r\n  message.success('操作成功！');\r\n}\r\n\r\nasync function render() {\r\n  const res = await getSettingConfigs();\r\n  const dataList = res.system_configs || [];\r\n  if (dataList.length) {\r\n    const nameSetting = dataList.find((item) => item.key === KEY_NAME);\r\n    const logoSetting = dataList.find((item) => item.key === KEY_LOGO);\r\n    if (nameSetting) {\r\n      // settingsData.name.id = nameSetting.id;\r\n      settingsData.name.value = nameSetting.value;\r\n    }\r\n    if (logoSetting) {\r\n      // settingsData.logo.id = logoSetting.id;\r\n      settingsData.logo.value = logoSetting.value;\r\n      logoUrl.value = parseUrlToPath(logoSetting.value);\r\n    }\r\n  }\r\n}\r\n\r\nconst uplodFile = ref(null);\r\n\r\nfunction onUpload({ file }) {\r\n  uplodFile.value = file;\r\n  file.status = 'uploading';\r\n  file.percentage = 0;\r\n  const timer = setInterval(() => {\r\n    if (uplodFile.value.status === 'finished') {\r\n      clearInterval(timer);\r\n      return;\r\n    }\r\n    uplodFile.value.percentage += Math.random() * 30;\r\n  }, 1000);\r\n  postPicture(file).then(({ url }) => {\r\n    settingsData.logo.value = url;\r\n    logoUrl.value = parseUrlToPath(url);\r\n    uplodFile.value.percentage = 100;\r\n    setTimeout(() => {\r\n      uplodFile.value.status = 'finished';\r\n    }, 0);\r\n  });\r\n}\r\n\r\nrender();\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.settings-manage-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  padding: 10px;\r\n  background: #fff;\r\n  box-sizing: border-box;\r\n  .website {\r\n    max-width: 400px;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./SettingsManage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SettingsManage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./SettingsManage.vue?vue&type=style&index=0&id=4ff57eb8&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\my\\\\cloud_dist\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4ff57eb8\"]])\n\nexport default __exports__"],"names":["cB","c","pProps","Object","assign","useTheme","depth","String","Number","defineComponent","name","props","setup","mergedClsPrefixRef","inlineThemeDisabled","useConfig","themeRef","style","typographyLight","cssVarsRef","computed","typeSafeDepth","common","cubicBezierEaseInOut","self","pFontSize","pLineHeight","pMargin","pTextColor","depthTextColor","value","undefined","themeClassHandle","useThemeClass","mergedClsPrefix","cssVars","themeClass","onRender","render","_a","this","call","h","class","$slots","message","dialog","createDiscreteApi","KEY_NAME","KEY_LOGO","websiteFormRef","ref","settingsData","reactive","id","logo","logoUrl","async","save","updateSettingConfigs","success","res","getSettingConfigs","dataList","system_configs","length","nameSetting","find","item","key","logoSetting","parseUrlToPath","uplodFile","onUpload","file","status","percentage","timer","setInterval","Math","random","clearInterval","postPicture","then","url","setTimeout","__exports__"],"sourceRoot":""}